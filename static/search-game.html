<!doctype html>
<html>
<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" type="text/css" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="/static/style.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="/static/img-res/favicon.ico">
</head>
<body>
    <div class="holder-first row-fluid">
        <div class="container">
            <img src="/static/img-res/logo.png" width="100" height="100" class="logo">
            <h1 align="center"> Multiplayer Quiz Game </h1>
        </div>
    </div>
<script>
//Establish the WebSocket connection and set up event handlers
function findGetParameter(parameterName) {
    var result = null,
        tmp = [];
    var items = location.search.substr(1).split("&");
    for (var index = 0; index < items.length; index++) {
        tmp = items[index].split("=");
        if (tmp[0] === parameterName) result = decodeURIComponent(tmp[1]);
    }
    return result;
}

$(document).ready(function(){
    // open websocket and check for response
    var gameRoom = findGetParameter('room');
        var webSocket = new WebSocket("ws://" + location.hostname + ":" + location.port + "/api/game_socket/"+gameRoom);//for testing
        webSocket.onmessage = function (e) {
            window.location = '/static/search-game.html?room='+e.data;// redirect to pre-game screen
        };
        webSocket.onerror = function(evt) {
            alert("Eroare");
        }; 
        webSocket.send("Find me a game!");
});

</script>
</body>
</html>